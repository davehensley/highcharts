$(function () {

	var horizon = {"suncolor_lighter":"#FDDA53","suntime_str":"0:00","skycolor":"#6CC4F2","suncurve":{"suncurve":[{"y":-43.37,"x":-13.35,"hour":"0.0"},{"y":-43.77,"x":6.82,"hour":"1.0"},{"y":-41.61,"x":26.45,"hour":"2.0"},{"y":-37.23,"x":44.47,"hour":"3.0"},{"y":-31.26,"x":60.57,"hour":"4.0"},{"y":-24.3,"x":75.05,"hour":"5.0"},{"y":-16.85,"x":88.44,"hour":"6.0"},{"y":-9.47,"x":101.28,"hour":"7.0"},{"y":-1.6,"x":114.04,"hour":"8.0"},{"y":4.59,"x":127.1,"hour":"9.0"},{"y":9.83,"x":140.73,"hour":"10.0"},{"y":13.84,"x":155.05,"hour":"11.0"},{"y":16.1,"x":169.95,"hour":"12.0"},{"y":16.44,"x":185.13,"hour":"13.0"},{"y":14.81,"x":200.17,"hour":"14.0"},{"y":11.39,"x":214.71,"hour":"15.0"},{"y":6.4,"x":228.58,"hour":"16.0"},{"y":0.8,"x":241.82,"hour":"17.0"},{"y":-6.77,"x":254.66,"hour":"18.0"},{"y":-14.31,"x":267.44,"hour":"19.0"},{"y":-21.73,"x":280.61,"hour":"20.0"},{"y":-28.87,"x":294.69,"hour":"21.0"},{"y":-35.19,"x":310.22,"hour":"22.0"},{"y":-40.13,"x":327.57,"hour":"23.0"},{"y":-42.85,"x":347.05,"hour":"24.0"}]},"lost_str":"9:07","sunset_local_str":"-","suncolor":"#FCD128","suncolor_darker":"#E3BC24","sunrise_local_str":"-","payload":[[0,32.84],[2,33.49],[4,33.61],[6,33.74],[8,33.67],[10,33.23],[12,33.29],[14,32.97],[16,32],[18,31.51],[20,31.25],[22,30.77],[24,30.2],[26,29.59],[28,29.02],[30,28.59],[32,28.38],[34,28.28],[36,27.64],[38,26.63],[40,25.97],[42,25.61],[44,25.09],[46,24.29],[48,22.76],[50,21.86],[52,21],[54,20.16],[56,19.03],[58,18.2],[60,17.22],[62,16.48],[64,15.62],[66,14.05],[68,12.36],[70,10.84],[72,9.21],[74,7.75],[76,5.85],[78,5.81],[80,6.27],[82,6.35],[84,6.67],[86,6.22],[88,6.27],[90,6.17],[92,6.08],[94,6.4],[96,6.66],[98,6.79],[100,7.21],[102,7.37],[104,8.08],[106,9.2],[108,10.11],[110,11.22],[112,12.29],[114,14.05],[116,15.38],[118,16.41],[120,17.46],[122,18.46],[124,20],[126,21.44],[128,22.57],[130,23.53],[132,23.55],[134,24.54],[136,25.61],[138,26.55],[140,26.91],[142,27.46],[144,28.28],[146,29.13],[148,29.96],[150,30.69],[152,31.71],[154,31.95],[156,32.02],[158,31.89],[160,31.89],[162,32.43],[164,32.27],[166,31.89],[168,31.68],[170,31.61],[172,31.75],[174,31.75],[176,31.44],[178,31.68],[180,30.98],[182,31.07],[184,30.87],[186,30.19],[188,29.63],[190,29.38],[192,29.18],[194,29.82],[196,29.48],[198,28.54],[200,27.86],[202,27.19],[204,26.09],[206,25.66],[208,25.4],[210,25.3],[212,25.4],[214,25.75],[216,25.82],[218,25.02],[220,23.83],[222,23.01],[224,23.23],[226,22.28],[228,20.78],[230,19.37],[232,17.9],[234,16.37],[236,16.37],[238,15.47],[240,14.95],[242,14.62],[244,12.58],[246,12.45],[248,12.33],[250,10.89],[252,10.39],[254,10.04],[256,8.12],[258,8.37],[260,7.12],[262,5.29],[264,5.05],[266,5.5],[268,6.05],[270,6.28],[272,6.51],[274,7.88],[276,8.58],[278,8.77],[280,9.37],[282,11.37],[284,12.93],[286,13.98],[288,15.28],[290,17.61],[292,20.03],[294,21.59],[296,22.15],[298,22.97],[300,23.31],[302,23.77],[304,24.1],[306,24.45],[308,25],[310,25.65],[312,26.09],[314,26.86],[316,28.04],[318,28.92],[320,29.77],[322,30.42],[324,30.91],[326,31.35],[328,31.58],[330,31.46],[332,31.18],[334,31.06],[336,31.03],[338,31.53],[340,31.97],[342,32.1],[344,32.43],[346,32.43],[348,32.11],[350,32.67],[352,32.38],[354,32.27],[356,32.58],[358,32.74],[360,32.84]],"lost_pm_str":"5:02","timeZoneId":"Europe/Oslo","suncurvedate":"12 February 2014","altitude":"308","mountaincolor":"#004589","lost_am_str":"4:04","maxy":58.25};
	var bearingLabel={
	  '-180':"S'th",
	  '-135':'SW',
	  '-90':'West',
	  '-45':'NW',
	  '0':"N'th",
	  '45':'NE',
	  '90':'East',
	  '135':'SE',
	  '180':"S'th",
	  '225':'SW',
	  '270':'West',
	  '315':'NW',
	  '360':"N'th"
	};
	$('#horizon').highcharts({
		chart: {
			type: 'area',
			zoomType: 'xy',
			plotBackgroundColor: horizon.skycolor
		},
		tooltip: {
			formatter: function() {
				if(this.series.name == 'Terrain')
				{
					return 'At bearing <b>'+ this.x +'</b> degrees the <br\> angle with the terrain is <b>'+ this.y.toFixed(1)+'</b> degrees';
				}
				else
				{
					return 'At <b>'+ pad(this.point.hour) +'</b> the sun is <b>'+ this.y.toFixed(1)+'</b> <br\>degrees above the horizon';
				}
			}
		},
		title: {
			//text: title
		},
		xAxis: {
			type: 'linear',
			tickInterval:45,
			min:0,
			max:360,
			labels: {
				formatter: function() 
				{
					return bearingLabel[this.value];
				}
			}
		},
		yAxis: {
			gridLineColor: 'transparent',
			min:0,
			max: 50,
			labels: {
				enabled: false
			},
			title: {
				enabled: false
			},
		},
		legend: {
		},
		plotOptions: {
			area: {
				color: horizon.mountaincolor,
				marker: {
					enabled: false,
				}
			},
			spline: {
				dataLabels : {
		        enabled : true,
		        formatter : function() {
		            return parseInt(this.point.hour,10);
		        }
		    },
				marker: {
					enabled: true,
					radius: 6,
					symbol: 'circle',
				}
			}
		},
		series: [{
			name: 'Terrain',
			data: horizon.payload,
			zIndex: 2
		},
		    // {
		    //     color: horizon.suncolor_lighter,
		    //     type: 'spline',
		    //     name: 'Sun curve '+december21is,
		    //     data: horizon.suncurve_wintersolstice.suncurve
		    // },
		    // {
		    //     color: horizon.suncolor_darker,
		    //     type: 'spline',
		    //     name: 'Sun curve '+june21is,
		    //     data: horizon.suncurve_summersolstice.suncurve
		    // },
		    {
		    	color: horizon.suncolor,
		    	type: 'spline',
		    	name: 'Sun curve',
				zIndex: 1,
		    	data: horizon.suncurve.suncurve,
		    	marker: {
		            symbol: 'url(http://www.highcharts.com/demo/gfx/sun.png)'
		        }
		    }]
		 });

});